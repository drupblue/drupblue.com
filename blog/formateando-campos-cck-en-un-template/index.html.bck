<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="es" lang="es" dir="ltr">


<!--  --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- / -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>formateando campos cck en un template | Drupblue</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="shortcut icon" href="../../profiles/openenterprise/themes/oe/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../../sites/default/files/css/css_d29ec6cb6d1dfabf50d009996e7b80c5/index.css" />
  <script type="text/javascript" src="../../sites/default/files/js/js_53a9e52bb6720f4c4e0a16807b479398/index.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "googleanalytics": { "trackOutgoing": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip" }, "cron": { "basePath": "/poormanscron", "runNext": 1414124302 } });
//--><!]]>
</script>
</head>

<body class="not-front not-logged-in page-node node-type-weblog one-sidebar sidebar-right">
  <div id="page" class="clear-block">
    <div id="header-wrap" >
      <div id="header" class="container-12 clear-block">
        <div id="site-header" class="clear-block">
          <div id="branding" class="grid-6">
                      <span id="logo"><a href="..//" rel="home"><img src="../../sites/default/files/logo/index.png" alt="Inicio" title="Inicio" width="250" height="75" /></a></span>
                                <h1 id="site-name"><a href="..//" rel="home">Drupblue</a></h1>
                              </div>
          <div class="grid-6">
            <div id="user-links" class="clear-block"><ul class="links"><li class="login first last"><a href="../../user/">Login</a></li>
</ul></div>
                          <div id="search-box"><form action="http://www.drupblue.com/blog/formateando-campos-cck-en-un-template"  accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Buscar en este sitio: </label>
 <input type="text" maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" value="" title="Introduzca los términos que quiera buscar." class="form-text" />
</div>
<input type="submit" name="op" id="edit-submit" value="Buscar"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-87aeec6ccd1dee18eeef880d1d8819b4" value="form-87aeec6ccd1dee18eeef880d1d8819b4"  />
<input type="hidden" name="form_id" id="edit-search-theme-form" value="search_theme_form"  />
</div>

</div></form>
</div>
                      </div>

                  <div id="site-menu" class="grid-12 alpha omega">
            <ul class="links main-menu"><li class="menu-358 first"><a href="..//" title="">Inicio</a></li>
<li class="menu-314"><a href="../../news/" title="News Articles">Noticias</a></li>
<li class="menu-1506"><a href="../../portfolio/" title="">Portfolio</a></li>
<li class="menu-316"><a href="../../services/">Servicios</a></li>
<li class="menu-310"><a href="../../blogs/" title="">Blog</a></li>
<li class="menu-313"><a href="../../faq/">FAQ</a></li>
<li class="menu-964 last"><a href="../../staff/" title="Equipo de Trabajo">Equipo</a></li>
</ul>          </div>
                </div>
      </div>
    </div>
    <!-- end of header -->
    
    <div id="slider-breadcrump" class="slider-content empty">
           <div id="slider-bc" class="container-12 clear-block">
             <div class="grid-12 region">
                            </div>
           </div>
    </div>
    <div id="slider-wrap" class="slider-content empty">
          </div>


        
    <div id="content-wrap" class="container-12 clear-block">
      <div id="main" class="column grid-8 ">
              <h1 class="title" id="page-title">formateando campos cck en un template</h1>
                        
      <div id="main-content" class="region clear-block">  
        <div id="node-46" class="node clear-block">



  <div class="meta">
      <span class="submitted">Enviado por osvaldo el Vie, 09/04/2009 - 15:00.</span>
  
    </div>

  <div class="content">
    <p>Cuando utilizaba un template (.tpl.php) para hacer el theming de un node creado a partir de un tipo de contenido cualquiera, solia imprimir los campos de esta manera:</p>
<blockquote><p>&lt;?<br />
&nbsp;php print $node-&gt;field_location[0][&#39;value&#39;];<br />
?&gt;</p></blockquote>
<p></p>
<p>pero ...<br />
en primer lugar, eso funciona bien para los campos texto, pero no todos son texto..<br />
algunos son taxonomias.. que se mostrarian asi:</p>
<blockquote><p>&nbsp;&nbsp;&nbsp; &lt;?php<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $term = taxonomy_get_term($node-&gt;field_city[0][&#39;value&#39;]);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print $term-&gt;name;<br />
&nbsp;&nbsp;&nbsp; ?&gt;</p></blockquote>
<p></p>
<p>pero ... (segundo pero) entonces tenemos los campos que son un date.<br />
ahh, parece facil... pero no lo es, esta la cuestion del formato...</p>
<p>primer intento</p>
<p></p>
<blockquote><p>&lt;?php<br />
&nbsp; print content_format(&#39;field_date&#39;, $node-&gt;field_birthday[0], &#39;iso&#39;);<br />
?&gt;</p></blockquote>
<p>nop...</p>
<p>segundo intento</p>
<blockquote><p>// referenciado aca <a href="http://drupal.org/node/221151#comment-744973" title="http://drupal.org/node/221151#comment-744973">http://drupal.org/node/221151#comment-744973</a><br />
// workaround here <a href="http://drupal.org/node/115706#comment-504436" title="http://drupal.org/node/115706#comment-504436">http://drupal.org/node/115706#comment-504436</a><br />
$eventtime = strtotime($node-&gt;field_birthday[0][&#39;value&#39;]);<br />
$eventtime = $eventtime - 28800; //this is -8 hours for my timezone<br />
echo date(&#39;m/d/Y \a\t g:ia&#39;, $eventtime);<br />
&nbsp;</p></blockquote>
<p>este estaba mejor .. pero eso de restar el timezone era pan para hoy y<br />
hambre para mañana....<br />
segui investigando...<br />
para hacer una historia larga corta, al final se muestra asi:</p>
<blockquote><p>&lt;?php<br />
print format_date($node-&gt;field_birthday[0][&#39;value&#39;], &#39;custom&#39;,&#39;F j, Y&#39;);<br />
?&gt;</p></blockquote>
<p></p>
<p>Los tipos de formato que aceptan las fechas son&nbsp; &quot;small&quot;, &quot;medium&quot;, &quot;large&quot;, y &quot;custom&quot; (como ya alguien dijo, <a href="http://gregorygo.com/2009/07/drupals-format_date-sizes-are-like-pizza/" target="_blank">similar a las pizzas</a> ;).</p>
<p>custom utiliza la funcion del php, ejemplos:</p>
<blockquote><p>&lt;?php<br />
// Assuming today is March 10th, 2001, 5:16:18 pm, and that we are in the<br />
// Mountain Standard Time (MST) Time Zone</p>
<p>$today = date(&quot;F j, Y, g:i a&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // March 10, 2001, 5:16 pm<br />
$today = date(&quot;m.d.y&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 03.10.01<br />
$today = date(&quot;j, n, Y&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 10, 3, 2001<br />
$today = date(&quot;Ymd&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 20010310<br />
$today = date(&#39;h-i-s, j-m-y, it is w Day&#39;);&nbsp;&nbsp;&nbsp;&nbsp; // 05-16-18, 10-03-01,<br />
1631 1618 6 Satpm01<br />
$today = date(&#39;\i\t \i\s \t\h\e jS \d\a\y.&#39;);&nbsp;&nbsp; // it is the 10th day.<br />
$today = date(&quot;D M j G:i:s T Y&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Sat Mar 10 17:16:18 MST 2001<br />
$today = date(&#39;H:m:s \m \i\s\ \m\o\n\t\h&#39;);&nbsp;&nbsp;&nbsp;&nbsp; // 17:03:18 m is month<br />
$today = date(&quot;H:i:s&quot;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 17:16:18<br />
?&gt;<br />
&nbsp;</p></blockquote>
<p>mas referencias en</p>
<p></p>
<ul>
<li><a href="http://www.php.net/manual/en/function.date.php" target="_blank">http://www.php.net/manual/en/function.date.php</a></li>
<li><a href="http://api.drupal.org/api/function/format_date" target="_blank">http://api.drupal.org/api/function/format_date</a></li>
</ul>
<p></p>
<p>A tener en cuenta cuando trabajemos con fechas ...<br />
<a href="http://drupal.org/node/373071" target="_blank">Use drupals format_date to avoid localization issues</a></p>
<p>Instead of using php&#39;s date, use drupal&#39;s format_date to avoid problems with non-english dates.</p>
<p><a href="http://drupal.org/node/355394" target="_blank">format_date vs. date</a></p>
<p>To be simple and straight to the point: why</p>
<p></p>
<blockquote><p>&lt;?php<br />
format_date(1238536800, &#39;custom&#39;, &#39;Y-m-d&#39;);<br />
?&gt;</p></blockquote>
<p>and</p>
<p></p>
<blockquote><p>&lt;?php<br />
date(&#39;Y-m-d&#39;, 1238536800);<br />
?&gt;</p></blockquote>
<p>have different results? First one is 2009-03-31 (which is wrong), second one is 2009-04-01 (which is right).<br />
Found a workaround:<br />
<a href="http://drupal.org/node/187449" target="_blank">http://drupal.org/node/187449</a></p>
<blockquote><p>&lt;?php<br />
&nbsp;&nbsp; $my_date = strtotime($node-&gt;field_date[0][&#39;value&#39;]);<br />
&nbsp;&nbsp; $tz_offset = strtotime(date(&quot;M d Y H:i:s&quot;)) - strtotime(gmdate(&quot;M<br />
d Y H:i:s&quot;));<br />
&nbsp;&nbsp; $my_date += $tz_offset;<br />
&nbsp;&nbsp; print format_date($my_date, &#39;custom&#39;, &#39;D d F Y&#39;, NULL);<br />
?&gt;</p></blockquote>
<p></p>
<p>Seems to fix the problem.</p>
<p>Aca se muestra otra forma que permite definir todo esto a traves de la interface web del drupal<br />
<a href="http://www.leveltendesign.com/blog/dustin-currie/format-dates-drupal" target="_blank">http://www.leveltendesign.com/blog/dustin-currie/format-dates-drupal</a><br />
sin embargo, no logre que me funcionara y no tuve tiempo para investigar que pasaba.</p>
<p>Retomando el inicio y para imprimir los campos se recomienda <a href="http://drupalcontrib.org/api/function/content_format/6" target="_blank">content_format()</a></p>
<p><b>INCORRECTO:</b></p>
<p></p>
<blockquote><p>print $node-&gt;field_content_something[0][&#39;value&#39;];</p></blockquote>
<p><b>CORRECTO:</b></p>
<p></p>
<blockquote><p>print content_format(&#39;field_content_something&#39;, $node-&gt;field_content_something, $formatter = &#39;default&#39;, $node = NULL);</p></blockquote>
<p>acorde a Greggles<br />
<a href="http://growingventuresolutions.com/blog/drupal-security" target="_blank">http://growingventuresolutions.com/blog/drupal-security</a></p>
<p>con lo que el ejemplo inicial, quedaría asi:</p>
<blockquote><p>&nbsp;if ($node-&gt;field_location[0][&#39;value&#39;]) {<br />
&nbsp;&nbsp;&nbsp;&nbsp; print content_format(&#39;field_location&#39;,$node-&gt;field_location[0], $text_formatter, $node);<br />
&nbsp;&nbsp; }</p></blockquote>
<p></p>
<div class="zemanta-pixie"><img alt="" class="zemanta-pixie-img" src="http://img.zemanta.com/pixy.gif?x-id=edb8eb36-a5c6-8c31-a00b-f3e598916408" /></div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../../user/login/index-10.html?destination=comment%2Freply%2F46%23comment-form">Inicie sesión</a> para enviar comentarios</span></li>
</ul></div>      </div>
            </div>

    
          <div id="sidebar-right" class="column sidebar region grid-4">
        <div class="border">
          <div id="block-tagadelic-1" class="block block-tagadelic">
  <h2>Tags in Keywords</h2>

  <div class="content">
    <a href="../../category/keywords/aquia/" class="tagadelic level3" rel="tag">Aquia</a> 
<a href="../../category/keywords/blogs/" class="tagadelic level1" rel="tag">blogs</a> 
<a href="../../category/keywords/community/" class="tagadelic level4" rel="tag">community</a> 
<a href="../../category/keywords/drupal/" class="tagadelic level6" rel="tag">drupal</a> 
<a href="../../category/keywords/drupalcon/" class="tagadelic level3" rel="tag">DrupalCon</a> 
<a href="../../category/keywords/drupal-seo/" class="tagadelic level1" rel="tag">drupal seo</a> 
<a href="../../category/keywords/search-engine-marketing/" class="tagadelic level1" rel="tag">search engine marketing</a> 
<a href="../../category/keywords/seo/" class="tagadelic level1" rel="tag">SEO</a> 
<a href="../../category/keywords/training/" class="tagadelic level1" rel="tag">training</a> 
  </div>
</div>
  <div id="block-views-staff-block_1" class="block block-views">
  <h2>Nosotros</h2>

  <div class="content">
    <div class="view view-staff view-id-staff view-display-id-block_1 view-dom-id-1">
    
  
  
      <div class="view-content">
      <table class="views-view-grid">
  <tbody>
                <tr class="row-1 row-first row-last">
                  <td class="col-1">
              
  <div class="views-field-field-staff-image-fid">
                <span class="field-content"><a href="../../blogs/Marcelo%20Crua%c3%b1as/"><img src="../../sites/default/files/imagecache/staff_small/staff/marcelo-cruanas_0/index.png" alt="" title=""  class="imagecache imagecache-staff_small imagecache-default imagecache-staff_small_default" width="25" height="25" /></a></span>
  </div>
  
  <div class="views-field-title">
                <span class="field-content"><a href="../../blogs/Marcelo%20Crua%c3%b1as/">Marcelo Cruañas</a></span>
  </div>
  
  <div class="views-field-field-staff-position-value">
                <span class="field-content">Director Creativo</span>
  </div>
          </td>
                  <td class="col-2">
              
  <div class="views-field-field-staff-image-fid">
                <span class="field-content"><a href="../../blogs/Osvaldo%20Toja/"><img src="../../sites/default/files/imagecache/staff_small/staff/linkedin/index.jpg" alt="" title=""  class="imagecache imagecache-staff_small imagecache-default imagecache-staff_small_default" width="25" height="25" /></a></span>
  </div>
  
  <div class="views-field-title">
                <span class="field-content"><a href="../../blogs/Osvaldo%20Toja/">Osvaldo Toja</a></span>
  </div>
  
  <div class="views-field-field-staff-position-value">
                <span class="field-content">Director Técnico</span>
  </div>
          </td>
              </tr>
      </tbody>
</table>
    </div>
  
  
  
  
  
  
</div>   </div>
</div>
  <div id="block-views-blog-block_1" class="block block-views">
  <h2>Recent Blogs</h2>

  <div class="content">
    <div class="view view-blog view-id-blog view-display-id-block_1 view-dom-id-2">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <span class="views-field-field-blog-image-fid">
                <span class="field-content"></span>
  </span>
  
  <span class="views-field-title">
                <span class="field-content"><a href="../permisos-para-tablas-temporales/">permisos para tablas temporales</a></span>
  </span>
  
  <span class="views-field-nothing">
                <span class="field-content"> posted by </span>
  </span>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../blogs/osvaldo/">osvaldo</a></span>
  </span>
  
  <span class="views-field-created">
                <span class="field-content"><em>2 años 48 semanas</em> ago</span>
  </span>
</li>
          <li class="views-row views-row-2 views-row-even">  
  <span class="views-field-field-blog-image-fid">
                <span class="field-content"></span>
  </span>
  
  <span class="views-field-title">
                <span class="field-content"><a href="../incompatiblidades-entre-drupal-6-y-php-53/">incompatiblidades entre drupal 6 y php 5.3</a></span>
  </span>
  
  <span class="views-field-nothing">
                <span class="field-content"> posted by </span>
  </span>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../blogs/osvaldo/">osvaldo</a></span>
  </span>
  
  <span class="views-field-created">
                <span class="field-content"><em>2 años 48 semanas</em> ago</span>
  </span>
</li>
          <li class="views-row views-row-3 views-row-odd">  
  <span class="views-field-field-blog-image-fid">
                <span class="field-content"></span>
  </span>
  
  <span class="views-field-title">
                <span class="field-content"><a href="../instalando-drush-en-windows-xp/">instalando drush en windows xp</a></span>
  </span>
  
  <span class="views-field-nothing">
                <span class="field-content"> posted by </span>
  </span>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../blogs/osvaldo/">osvaldo</a></span>
  </span>
  
  <span class="views-field-created">
                <span class="field-content"><em>4 años 20 semanas</em> ago</span>
  </span>
</li>
          <li class="views-row views-row-4 views-row-even">  
  <span class="views-field-field-blog-image-fid">
                <span class="field-content"></span>
  </span>
  
  <span class="views-field-title">
                <span class="field-content"><a href="index.html" class="active">formateando campos cck en un template</a></span>
  </span>
  
  <span class="views-field-nothing">
                <span class="field-content"> posted by </span>
  </span>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../blogs/osvaldo/">osvaldo</a></span>
  </span>
  
  <span class="views-field-created">
                <span class="field-content"><em>5 años 7 semanas</em> ago</span>
  </span>
</li>
          <li class="views-row views-row-5 views-row-odd views-row-last">  
  <span class="views-field-field-blog-image-fid">
                <span class="field-content"></span>
  </span>
  
  <span class="views-field-title">
                <span class="field-content"><a href="../creando-nuevos-sitios-en-un-multisite-con-un-comando/">creando nuevos sitios en un multisite con un comando</a></span>
  </span>
  
  <span class="views-field-nothing">
                <span class="field-content"> posted by </span>
  </span>
  
  <span class="views-field-name">
                <span class="field-content"><a href="../../blogs/osvaldo/">osvaldo</a></span>
  </span>
  
  <span class="views-field-created">
                <span class="field-content"><em>5 años 11 semanas</em> ago</span>
  </span>
</li>
      </ul>
</div>    </div>
  
  
  
      
<div class="more-link">
  <a href="../../blogs/">
    more  </a>
</div>
  
  
  
</div>   </div>
</div>
  <div id="block-views-blog-block_4" class="block block-views">
  <h2>Blog Archive</h2>

  <div class="content">
    <div class="view view-blog view-id-blog view-display-id-block_4 view-dom-id-3">
    
  
  
      <div class="view-content">
      <div class="item-list">
  <ul class="views-summary">
      <li><a href="../../blog-archive/201111/">Noviembre 2011</a>
              (2)
          </li>
      <li><a href="../../blog-archive/201006/">Junio 2010</a>
              (1)
          </li>
      <li><a href="../../blog-archive/200909/">Septiembre 2009</a>
              (1)
          </li>
      <li><a href="../../blog-archive/200908/">Agosto 2009</a>
              (1)
          </li>
      <li><a href="../../blog-archive/200906/">Junio 2009</a>
              (3)
          </li>
    </ul>
</div>
    </div>
  
  
  
  
  
  
</div>   </div>
</div>
        </div>
      </div>
    

    </div>



  <div id="footer-wrap" class="container-12 clear-block">
        

    <div id="footer" class="region grid-12">
        <div id="block-menu-footer-links" class="block block-menu">
  <h2>Footer Links</h2>

  <div class="content">
    <ul class="menu"><li class="leaf first"><a href="../../content/contact-us/" title="">Contáctenos</a></li>
<li class="leaf"><a href="../../politica-privacidad/" title="">Política de Privacidad</a></li>
<li class="leaf last"><a href="../../aviso-legal/" title="">Aviso Legal</a></li>
</ul>  </div>
</div>
      <div id="levelten"><a href="http://www.leveltendesign.com/enterprise">Open Enterprise drupal distribution</a> by LevelTen Interactive</div>
    </div>
  </div>


  </div>
  <script type="text/javascript">
<!--//--><![CDATA[//><!--
var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-5155520-3"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();
//--><!]]>
</script>
</body>

<!--  --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- / -->
</html>
